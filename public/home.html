<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>Mōyu</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="/css/main.css" />
    <script src="/socket.io/socket.io.js"></script>
  </head>

  <body class="moyu-page">
    <!-- 整體寬度：放寬到 6xl，header 和 main 同一個容器 -->
    <div class="max-w-6xl mx-auto px-4 py-6">
      <!-- 上方列：LOGO + 副標 + 右側暱稱 + 設定 -->
      <header
        class="flex items-center justify-between mb-8 gap-6"
      >
        <!-- 左邊：Logo + 副標 -->
        <div class="flex flex-col">
          <img src="./images/moyu-logo.png" class="moyu-logo" />
          <p
            id="app-subtitle"
            class="text-slate-400 text-xs sm:text-sm mt-1"
          ></p>
        </div>

        <!-- 右邊：暱稱框 + 設定按鈕 -->
        <div class="flex items-center gap-3 sm:gap-4 ml-auto">

          <!-- 暱稱框：等高、同樣的 pill -->
          <div
            id="nickname-box"
            class="h-10 px-4 rounded-full border border-slate-600/70 bg-slate-900/40 flex items-center"
          >
            <div class="text-sm text-slate-300 flex items-center">
              <span id="hi-label"></span>
              <span id="nickname-text" class="font-semibold ml-1">...</span>
            </div>
          </div>

          <!-- 設定按鈕：高度與暱稱框一致 -->
          <button
            id="settings-btn"
            onclick="window.location.href='settings.html'"
            class="h-10 px-4 rounded-full border border-slate-600/70 bg-slate-900/40 flex items-center gap-1 text-sm text-slate-200 hover:bg-slate-800 transition"
          >
            <span>⚙️</span>
            <!-- <span id="settings-label"></span>-->
          </button>

        </div>
      </header>

      <!-- 主要內容：左右兩欄 -->
      <main class="grid md:grid-cols-2 gap-6">
        <!-- 左側：配對卡 ＋ 聊天卡（同一欄位） -->
        <section class="space-y-4">
          <!-- 隨機配對卡片 -->
          <div id="match-panel" class="moyu-card">
            <p
              id="match-desc"
              class="moyu-subtitle text-xs mb-3"
            ></p>
            <div class="flex items-center gap-2">
              <button
                id="start-match-btn"
                class="flex-1 moyu-btn moyu-btn-primary text-sm font-semibold"
              ></button>
              <button
                id="stop-match-btn"
                class="moyu-btn moyu-btn-secondary text-xs px-3 py-2 hidden"
              ></button>
            </div>
          </div>

          <!-- 聊天室卡片 -->
          <div
            id="chat-card"
            class="moyu-card hidden flex flex-col max-h-[520px]"
          >
            <!-- 聊天室標題列 -->
            <div class="flex items-center justify-between mb-3">
              <div>
                <div
                  id="chatroom-label"
                  class="text-xs text-slate-400 uppercase tracking-wide"
                ></div>
                <div
                  id="chat-title"
                  class="text-sm font-semibold text-slate-200"
                ></div>
              </div>
              <div class="flex items-center gap-3">
                <div
                  id="countdown-wrap"
                  class="px-2 py-1 rounded-full bg-slate-900/70 border border-amber-400/40 text-xs text-amber-300 hidden"
                >
                  <span id="countdown-prefix"></span>
                  <span
                    id="countdown"
                    class="font-mono ml-1"
                    >5s</span
                  >
                </div>
                <button
                  id="force-end-btn"
                  class="text-xs px-2.5 py-1 rounded-full border border-slate-600 text-slate-300 hover:bg-slate-700"
                ></button>
              </div>
            </div>

            <!-- 聊天訊息區 -->
            <div
              id="messages"
              class="chat-messages bg-slate-900/60 rounded-xl p-3 text-sm space-y-2 overflow-y-auto flex-1"
            >
              <div
                id="chat-placeholder"
                class="text-xs text-slate-500 text-center"
              ></div>
            </div>

            <!-- 輸入區 -->
            <div class="mt-3">
              <div class="flex items-center gap-2">
                <input
                  id="chat-input"
                  type="text"
                  class="flex-1 px-3 py-2 rounded-xl bg-slate-900/80 border border-slate-700 text-sm focus:outline-none focus:ring-1 focus:ring-emerald-400"
                  placeholder=""
                />
                <button
                  id="send-btn"
                  class="px-3 py-2 rounded-xl bg-emerald-500 text-slate-900 text-sm font-semibold hover:bg-emerald-400"
                ></button>
              </div>
            </div>

            <!-- 倒數結束後的選項 -->
            <div
              id="keep-actions"
              class="mt-3 pt-3 border-t border-slate-700 hidden"
            >
              <div
                id="keep-question"
                class="text-xs text-slate-400 mb-2"
              ></div>
              <div class="flex items-center gap-2">
                <button
                  id="keep-btn"
                  class="flex-1 py-2 rounded-xl bg-emerald-500 text-slate-900 text-sm font-semibold hover:bg-emerald-400"
                ></button>
                <button
                  id="end-btn"
                  class="flex-1 py-2 rounded-xl bg-slate-700 text-slate-100 text-sm hover:bg-slate-600"
                ></button>
              </div>
              <div
                id="keep-hint"
                class="text-[11px] text-slate-500 mt-1 min-h-[1.25rem]"
              ></div>
            </div>
          </div>
        </section>

        <!-- 右側：已保留緣分 -->
        <section class="space-y-4">
          <div class="moyu-card h-full">
            <div class="flex items-center justify-between mb-2">
              <h2
                id="saved-section-title"
                class="moyu-section-title text-sm"
              ></h2>
              <span
                id="saved-usage"
                class="text-[11px] text-slate-400"
              >
                0 / 1
              </span>
            </div>
            <p
              id="saved-desc"
              class="text-xs text-slate-400 mb-3"
            ></p>
            <div
              id="saved-list"
              class="space-y-2 max-h-60 md:max-h-[420px] overflow-y-auto text-sm"
            >
              <div
                id="saved-empty-text"
                class="text-slate-500 text-xs"
              ></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script type="module" src="./JS/home.js"></script>
    <script type="module" src="./JS/client.js"></script>
  </body>
</html>
